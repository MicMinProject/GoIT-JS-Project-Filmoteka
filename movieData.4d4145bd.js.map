{"version":3,"sources":["js/fetchMovie.js","js/movieData.js"],"names":["api","baseUrl","apiKey","fetchMovieData","movieId","response","fetch","jsonData","json","watchedBtn","document","querySelector","queueBtn","movieData","photo","title","votesAvarage","votes","popularity","orginalTitle","genre","about","id","renderMovie","clearModal","then","res","data","poster_path","vote_average","vote_count","original_title","genres","map","genresArray","name","toString","overview","insertAdjacentHTML","innerHTML","addToWatched","watchedMovie","JSON","parse","localStorage","getItem","movieTitleForConsole","newMovie","movieTitle","ID","movie","console","log","push","setItem","stringify","addToQueue","queue","addEventListener","target","path","getAttribute","e"],"mappings":"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","file":"movieData.4d4145bd.js","sourceRoot":"../src","sourcesContent":["const api = {\n  baseUrl: 'https://api.themoviedb.org',\n  apiKey: '130c7a7ecd86dbb286ae26c3cdcca88c',\n};\n\n\nasync function fetchMovieData(movieId) {\n\n  const response = await fetch(\n    `${api.baseUrl}/3/movie/${movieId}?api_key=${api.apiKey}&language=en-US`\n  );\n  const jsonData = await response.json();\n  return jsonData;\n}\n\n\nexport { fetchMovieData };\n","const watchedBtn = document.querySelector('.watched');\nconst queueBtn = document.querySelector('.queue');\nimport { fetchMovieData } from './fetchMovie.js';\n\nlet movieData = {\n  photo: '',\n  title: '',\n  votesAvarage: '',\n  votes: '',\n  popularity: '',\n  orginalTitle: '',\n  genre: '',\n  about: '',\n  id: '',\n};\n\ndocument.addEventListener('click', target => {\n  try {\n    let movieId = target.path[2].getAttribute('data-id');\n    if (movieId !== null) {\n      renderMovie(movieId);\n    }\n  } catch (e) {}\n});\n\nfunction renderMovie(movieId) {\n  clearModal();\n  fetchMovieData(movieId).then(res => {\n    let data = res;\n    movieData.photo = data.poster_path;\n    movieData.title = data.title;\n    movieData.votesAvarage = data.vote_average;\n    movieData.votes = data.vote_count;\n    movieData.popularity = data.popularity;\n    movieData.orginalTitle = data.original_title;\n    const genresArray = data.genres;\n    let genres = genresArray.map(genresArray => genresArray.name);\n    movieData.genre = genres.toString();\n    movieData.about = data.overview;\n    movieData.id = data.id;\n\n    document\n      .querySelector('.movie')\n      .insertAdjacentHTML(\n        'afterbegin',\n        `<img class=\"modal__movie-photo\" src=\"https://image.tmdb.org/t/p/original${movieData.photo}\" alt=\"photo\" />`,\n      );\n    document\n      .querySelector('.modal__movie-title')\n      .insertAdjacentHTML('afterbegin', `${movieData.title}`);\n    document.querySelector('.vote').insertAdjacentHTML('afterbegin', `${movieData.votesAvarage}`);\n    document.querySelector('.votes').insertAdjacentHTML('afterbegin', `${movieData.votes}`);\n    document\n      .querySelector('.popularity')\n      .insertAdjacentHTML('afterbegin', `${movieData.popularity}`);\n    document\n      .querySelector('.orginal-title')\n      .insertAdjacentHTML('afterbegin', `${movieData.orginalTitle}`);\n    document.querySelector('.genre').insertAdjacentHTML('afterbegin', `${movieData.genre}`);\n    document.querySelector('.modal__about').insertAdjacentHTML('afterbegin', `${movieData.about}`);\n  });\n}\n\nfunction clearModal() {\n  document.querySelector('.movie').innerHTML = '';\n  document.querySelector('.modal__movie-title').innerHTML = '';\n  document.querySelector('.vote').innerHTML = '';\n  document.querySelector('.votes').innerHTML = '';\n  document.querySelector('.popularity').innerHTML = '';\n  document.querySelector('.orginal-title').innerHTML = '';\n  document.querySelector('.genre').innerHTML = '';\n  document.querySelector('.modal__about').innerHTML = '';\n}\n\nfunction addToWatched() {\n  let watchedMovie;\n  watchedMovie = JSON.parse(localStorage.getItem('watchedMovie'));\n  if (watchedMovie == null) watchedMovie = [];\n\n  let movieTitleForConsole = { movieTitle: movieData.title, ID: movieData.id };\n  let newMovie = { movieTitle: movieData.title, ID: movieData.id };\n\n  for (let movie of watchedMovie) {\n    if (movie.ID === newMovie.ID) {\n      newMovie = '';\n      break;\n    }\n  }\n  console.log(watchedMovie)\n  if (newMovie === '') {\n    console.log(`Film \"${movieTitleForConsole.movieTitle}\" jest już w bazie`);\n  } else {\n    watchedMovie.push(newMovie);\n    localStorage.setItem('watchedMovie', JSON.stringify(watchedMovie));\n    console.log(`Dodałeś film \"${movieTitleForConsole.movieTitle}\" do obejrzanych`);\n  }\n}\n  \n\n  \nfunction addToQueue() {\n  let queue;\n\n  queue = JSON.parse(localStorage.getItem('queue'));\n  if (queue == null) queue = [];\n\n  let movieTitleForConsole = { movieTitle: movieData.title, ID: movieData.id };\n  let newMovie = { movieTitle: movieData.title, ID: movieData.id };\n\n  for (let movie of queue) {\n    if (movie.ID === newMovie.ID) {\n      newMovie = '';\n      break;\n    }\n  }\n\n  if (newMovie === '') {\n    console.log(`Film \"${movieTitleForConsole.movieTitle}\" jest już w kolejce`);\n  } else {\n    queue.push(newMovie);\n    localStorage.setItem('queue', JSON.stringify(queue));\n    console.log(`Dodałeś film \"${movieTitleForConsole.movieTitle}\" do kolejki`);\n  }\n}\n\nwatchedBtn.addEventListener('click', addToWatched);\n\nqueueBtn.addEventListener('click', addToQueue);\n\nexport { addToWatched, addToQueue, renderMovie };"]}