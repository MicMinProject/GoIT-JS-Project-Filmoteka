{"version":3,"sources":["js/fetchMovie.js","js/library.js"],"names":["api","baseUrl","apiKey","fetchMovieData","movieId","response","fetch","jsonData","json","buttonWatched","document","querySelector","buttonQueue","info","div","list","createElement","classList","add","imgURL","renderMyOneMovie","movie","id","poster_path","original_title","release_date","genres","year","slice","console","log","myGenre","map","genre","name","join","innerHTML","renderLibMovies","then","watchedMovie","JSON","parse","localStorage","getItem","getWatched","remove","ID","removeEventListener","addEventListener","getQueque","append","queue"],"mappings":";AAaC,aAAA,OAAA,eAAA,QAAA,aAAA,CAAA,OAAA,IAAA,QAAA,eAAA,EAbD,MAAMA,EAAM,CACVC,QAAS,6BACTC,OAAQ,oCAIV,eAAeC,EAAeC,GAEtBC,MAAAA,QAAiBC,SAClBN,EAAIC,mBAAmBG,aAAmBJ,EAAIE,yBAG5CK,aADgBF,EAASG;;AC+DlC,aA1EA,IAAA,EAAA,QAAA,mBAEA,MAAMC,EAAgBC,SAASC,cAAc,gBACvCC,EAAcF,SAASC,cAAc,cACrCE,EAAOH,SAASC,cAAc,eAC9BG,EAAMJ,SAASC,cAAc,UAC7BI,EAAOL,SAASM,cAAc,MACpCD,EAAKE,UAAUC,IAAI,qBAcnB,MAAMC,EAAS,mCACf,SAASC,EAAiBC,GAChB,MAAA,GAAEC,EAAF,YAAMC,EAAN,eAAmBC,EAAnB,aAAmCC,EAAnC,OAAiDC,GAAWL,EAE9DM,IAAAA,EAEFA,EADW,KAATA,EACKF,EAAaG,MAAM,EAAE,GAErB,GAETC,QAAQC,IAAIH,GACRI,IAAAA,EAAUL,EAAOM,IAAIC,GAASA,EAAMC,MAAMC,KAAK,MACnDpB,EAAKqB,4FACqEd,WAAYH,IAASI,WAAqBC,oDAC5EA,mDACDO,OAAaJ,yBAIxD,SAASU,EAAgBjC,IACRA,EAAAA,EAAAA,gBAAAA,GAASkC,KAAKjB,IAC3BD,EAAiBC,KAIrB,IAAIkB,EAAeC,KAAKC,MAAMC,aAAaC,QAAQ,iBACnD,SAASC,IACHL,GAAiB,OAAjBA,EAAuB,CACpB,IAAA,IAAIlB,KAASkB,EAChB1B,EAAKgC,SACL9B,EAAKqB,UAAY,GACjBC,EAAgBhB,EAAMyB,IAExBrC,EAAcsC,oBAAoB,QAASH,GAC3ChC,EAAYoC,iBAAiB,QAASC,GAExCnC,EAAIoC,OAAOnC,GAEbN,EAAcuC,iBAAiB,QAASJ,GAExC,IAAIO,EAAQX,KAAKC,MAAMC,aAAaC,QAAQ,UAC5C,SAASM,IACHE,GAAU,OAAVA,EAAgB,CACb,IAAA,IAAI9B,KAAS8B,EAChBtC,EAAKgC,SACL9B,EAAKqB,UAAW,GAChBC,EAAgBhB,EAAMyB,IAExBlC,EAAYmC,oBAAoB,QAASE,GACzCxC,EAAcuC,iBAAiB,QAASJ,GAE1C9B,EAAIoC,OAAOnC,GAEbH,EAAYoC,iBAAiB,QAASC","file":"library.0ab014aa.js","sourceRoot":"../src","sourcesContent":["const api = {\n  baseUrl: 'https://api.themoviedb.org',\n  apiKey: '130c7a7ecd86dbb286ae26c3cdcca88c',\n};\n\n\nasync function fetchMovieData(movieId) {\n\n  const response = await fetch(\n    `${api.baseUrl}/3/movie/${movieId}?api_key=${api.apiKey}&language=en-US`\n  );\n  const jsonData = await response.json();\n  return jsonData;\n}\n\n\nexport { fetchMovieData };\n","import { fetchMovieData } from './fetchMovie.js';\n\nconst buttonWatched = document.querySelector('#btn-watched');\nconst buttonQueue = document.querySelector('#btn-queue');\nconst info = document.querySelector('.start-info');\nconst div = document.querySelector('.start');\nconst list = document.createElement('ul');\nlist.classList.add('lib-gallery__list');\n\n// click control\n// const handleClick = () => {\n//   console.log('btn Watched was clicked');\n// };\n// buttonWatched.addEventListener('click', handleClick);\n\n// const handleClickQ = () => {\n//   console.log('btn Queue was clicked');\n// };\n// buttonQueue.addEventListener('click', handleClickQ);\n\n\nconst imgURL = 'https://image.tmdb.org/t/p/w500/';\nfunction renderMyOneMovie(movie) {\n    const { id, poster_path, original_title, release_date, genres } = movie;\n    //let year = release_date?.slice(0, 4) ?? '';\n    let year;\n    if (year !== '') {\n      year = release_date.slice(0,4);\n    } else {\n      year = '';\n    }\n    console.log(year);\n    let myGenre = genres.map(genre => genre.name).join(', ');\n    list.innerHTML += `\n          <li class=\"lib-gallery__item\"><img class=\"lib-gallery__image\" id=\"${id}\" src=\"${imgURL}${poster_path}\" alt=\"${original_title}\" />\n            <p class=\"lib-gallery__title\">${original_title}</p>\n            <p class=\"lib-gallery__desc\">${myGenre} | ${year}</p>\n          </li>`;\n  };\n\nfunction renderLibMovies(movieId) {\n  fetchMovieData(movieId).then(movie => {\n    renderMyOneMovie(movie);\n  });\n}\n\nlet watchedMovie = JSON.parse(localStorage.getItem('watchedMovie'));\nfunction getWatched() {\n  if (watchedMovie !== null) {\n    for (let movie of watchedMovie) {\n      info.remove();\n      list.innerHTML = '';\n      renderLibMovies(movie.ID);\n    }\n    buttonWatched.removeEventListener('click', getWatched);\n    buttonQueue.addEventListener('click', getQueque)\n  }\n  div.append(list);\n}\nbuttonWatched.addEventListener('click', getWatched);\n\nlet queue = JSON.parse(localStorage.getItem('queue'));\nfunction getQueque() {\n  if (queue !== null) {\n    for (let movie of queue) {\n      info.remove();\n      list.innerHTML ='';\n      renderLibMovies(movie.ID);\n    }\n    buttonQueue.removeEventListener('click', getQueque);\n    buttonWatched.addEventListener('click', getWatched);\n  }\n  div.append(list);\n}\nbuttonQueue.addEventListener('click', getQueque);"]}